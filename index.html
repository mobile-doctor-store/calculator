<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Free advanced online scientific calculator with history, functions, and themes. Calculate math problems including trigonometry, logarithms, and more.">
  <meta name="keywords" content="scientific calculator, online calculator, math calculator, trigonometry, logarithm, algebra calculator, math tool, calculator for students">
  <meta name="author" content="MobileDoctor">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph Tags -->
  <meta property="og:title" content="Advanced Scientific Calculator - Free Online Math Tool">
  <meta property="og:description" content="Free advanced scientific calculator for solving complex math problems. Includes trigonometry, logarithms, exponents, and more!">
  <meta property="og:image" content="https://calculator.mobiledoctor.org.in/images/calculator-thumbnail.jpg">
  <meta property="og:url" content="https://calculator.mobiledoctor.org.in">
  <meta property="og:type" content="website">
  
  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Advanced Scientific Calculator">
  <meta name="twitter:description" content="Solve advanced math problems with this free online scientific calculator.">
  <meta name="twitter:image" content="https://calculator.mobiledoctor.org.in/images/calculator-thumbnail.jpg">
  <meta name="twitter:site" content="@mobiledoctor">

  <!-- Canonical Link for SEO -->
  <link rel="canonical" href="https://calculator.mobiledoctor.org.in">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ§®</text></svg>">
  
  <!-- Title -->
  <title>Advanced Scientific Calculator - Free Online Math Tool by MobileDoctor</title>

  <!-- Structured Data for SEO: JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Advanced Scientific Calculator",
    "description": "An advanced online scientific calculator with support for trigonometric, logarithmic, and other advanced mathematical functions.",
    "url": "https://calculator.mobiledoctor.org.in",
    "mainEntityOfPage": "https://calculator.mobiledoctor.org.in",
    "operatingSystem": "Any",
    "applicationCategory": "EducationalApplication",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "publisher": {
      "@type": "Organization",
      "name": "MobileDoctor",
      "logo": {
        "@type": "ImageObject",
        "url": "https://calculator.mobiledoctor.org.in/logo.png"
      }
    }
  }
  </script>

  <style>
    :root {
      --primary-color: #4a6fa5;
      --secondary-color: #166088;
      --accent-color: #4cb5f5;
      --background-color: #f5f7fa;
      --display-bg: #f0f4f8;
      --button-bg: #ffffff;
      --button-hover: #e9eef4;
      --text-color: #333333;
      --border-color: #d1d9e6;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --border-radius: 12px;
    }

    .dark-mode {
      --primary-color: #5d7cab;
      --secondary-color: #1a6fa5;
      --accent-color: #5ac8fa;
      --background-color: #1a1a2e;
      --display-bg: #16213e;
      --button-bg: #2d3748;
      --button-hover: #4a5568;
      --text-color: #e2e8f0;
      --border-color: #4a5568;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      transition: background-color 0.3s ease, color 0.3s ease;
      line-height: 1.6;
    }

    header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      text-align: center;
      padding: 1.5rem;
      box-shadow: var(--shadow);
    }

    h1 {
      font-size: 2.2rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .header-description {
      font-size: 1.1rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem 1rem;
    }

    .calculator-container {
      width: 100%;
      max-width: 500px;
      background-color: var(--button-bg);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      margin-bottom: 2rem;
    }

    #display {
      width: 100%;
      min-height: 80px;
      padding: 1.5rem;
      font-size: 1.8rem;
      text-align: right;
      background-color: var(--display-bg);
      border: none;
      color: var(--text-color);
      outline: none;
      border-bottom: 1px solid var(--border-color);
    }

    .buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1px;
      background-color: var(--border-color);
    }

    button {
      border: none;
      padding: 1rem;
      font-size: 1.2rem;
      background-color: var(--button-bg);
      color: var(--text-color);
      cursor: pointer;
      transition: background-color 0.2s;
      min-height: 60px;
    }

    button:hover {
      background-color: var(--button-hover);
    }

    .operator {
      background-color: var(--primary-color);
      color: white;
    }

    .operator:hover {
      background-color: var(--secondary-color);
    }

    .equals {
      background-color: var(--accent-color);
      color: white;
      grid-column: span 2;
    }

    .equals:hover {
      opacity: 0.9;
    }

    .scientific {
      background-color: var(--secondary-color);
      color: white;
    }

    .scientific:hover {
      opacity: 0.9;
    }

    .history {
      padding: 1.5rem;
      border-top: 1px solid var(--border-color);
    }

    .history h3 {
      margin-bottom: 1rem;
      color: var(--primary-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #historyList {
      list-style-type: none;
      max-height: 200px;
      overflow-y: auto;
    }

    #historyList li {
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border-color);
      word-break: break-all;
    }

    .theme-toggle {
      width: 100%;
      padding: 1rem;
      background-color: var(--primary-color);
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .theme-toggle:hover {
      background-color: var(--secondary-color);
    }

    footer {
      text-align: center;
      padding: 1.5rem;
      background-color: var(--primary-color);
      color: white;
    }

    .clear-history {
      background: none;
      border: none;
      color: var(--accent-color);
      cursor: pointer;
      font-size: 0.9rem;
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .calculator-container {
        border-radius: 0;
      }
      
      button {
        padding: 0.8rem;
        font-size: 1rem;
        min-height: 50px;
      }
      
      #display {
        font-size: 1.5rem;
        padding: 1rem;
        min-height: 60px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .header-description {
        font-size: 0.9rem;
      }
    }

    /* Animation for calculation results */
    @keyframes calculate {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }
    
    .calculating {
      animation: calculate 0.3s ease;
    }
  </style>
</head>
<body>
  <header>
    <h1>Advanced Scientific Calculator</h1>
    <p class="header-description">Free online scientific calculator with advanced functions, calculation history, and dark/light mode</p>
  </header>
  
  <main>
    <div class="calculator-container">
      <input type="text" id="display" disabled placeholder="0" aria-label="Calculator display">
      <div class="buttons">
        <button onclick="clearDisplay()" class="operator" aria-label="All Clear">AC</button>
        <button onclick="clearLast()" class="operator" aria-label="Clear">C</button>
        <button onclick="appendToDisplay('%')" class="operator" aria-label="Percentage">%</button>
        <button onclick="appendToDisplay('/')" class="operator" aria-label="Divide">/</button>
        
        <button onclick="appendToDisplay('7')" aria-label="Seven">7</button>
        <button onclick="appendToDisplay('8')" aria-label="Eight">8</button>
        <button onclick="appendToDisplay('9')" aria-label="Nine">9</button>
        <button onclick="appendToDisplay('*')" class="operator" aria-label="Multiply">Ã—</button>
        
        <button onclick="appendToDisplay('4')" aria-label="Four">4</button>
        <button onclick="appendToDisplay('5')" aria-label="Five">5</button>
        <button onclick="appendToDisplay('6')" aria-label="Six">6</button>
        <button onclick="appendToDisplay('-')" class="operator" aria-label="Subtract">-</button>
        
        <button onclick="appendToDisplay('1')" aria-label="One">1</button>
        <button onclick="appendToDisplay('2')" aria-label="Two">2</button>
        <button onclick="appendToDisplay('3')" aria-label="Three">3</button>
        <button onclick="appendToDisplay('+')" class="operator" aria-label="Add">+</button>
        
        <button onclick="appendToDisplay('0')" aria-label="Zero">0</button>
        <button onclick="appendToDisplay('.')" aria-label="Decimal Point">.</button>
        <button onclick="calculateResult()" class="equals" aria-label="Equals">=</button>
        
        <button onclick="calculatePower()" class="scientific" aria-label="Power">x^y</button>
        <button onclick="calculateSquareRoot()" class="scientific" aria-label="Square Root">âˆš</button>
        <button onclick="calculateSin()" class="scientific" aria-label="Sine">sin</button>
        <button onclick="calculateCos()" class="scientific" aria-label="Cosine">cos</button>
        
        <button onclick="calculateTan()" class="scientific" aria-label="Tangent">tan</button>
        <button onclick="calculateLog()" class="scientific" aria-label="Logarithm">log</button>
        <button onclick="calculateLn()" class="scientific" aria-label="Natural Logarithm">ln</button>
        <button onclick="appendToDisplay('(')" class="scientific" aria-label="Left Parenthesis">(</button>
        
        <button onclick="appendToDisplay(')')" class="scientific" aria-label="Right Parenthesis">)</button>
        <button onclick="calculateFactorial()" class="scientific" aria-label="Factorial">x!</button>
        <button onclick="calculatePi()" class="scientific" aria-label="Pi">Ï€</button>
        <button onclick="calculateE()" class="scientific" aria-label="Euler's Number">e</button>
      </div>
      <div class="history">
        <h3>Calculation History <button class="clear-history" onclick="clearHistory()">Clear</button></h3>
        <ul id="historyList"></ul>
      </div>
      <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle Dark/Light Mode">Toggle Dark/Light Mode</button>
    </div>
  </main>
  
  <footer>
    <p>&copy; 2025 MobileDoctor. All rights reserved. | Advanced Scientific Calculator v2.0</p>
  </footer>

  <script>
    // Get references to the display and history elements
    let display = document.getElementById('display');
    let historyList = document.getElementById('historyList');
    let currentExpression = '';
    let lastResult = '';

    // Initialize calculator
    function initCalculator() {
      initTheme();
      loadHistory();
      clearDisplay();
      
      // Add keyboard support
      document.addEventListener('keydown', handleKeyPress);
    }

    // Handle keyboard input
    function handleKeyPress(event) {
      const key = event.key;
      
      if (/[0-9]/.test(key)) {
        appendToDisplay(key);
      } else if (key === '+' || key === '-' || key === '*' || key === '/') {
        appendToDisplay(key);
      } else if (key === '.') {
        appendToDisplay('.');
      } else if (key === 'Enter' || key === '=') {
        event.preventDefault();
        calculateResult();
      } else if (key === 'Escape') {
        clearDisplay();
      } else if (key === 'Backspace') {
        clearLast();
      } else if (key === '(' || key === ')') {
        appendToDisplay(key);
      } else if (key === '%') {
        appendToDisplay('%');
      }
    }

    // Append a character to the display
    function appendToDisplay(value) {
      if (display.value === '0' && value !== '.') {
        display.value = value;
      } else {
        // Prevent multiple decimal points in a number
        if (value === '.' && display.value.split(/[\+\-\*\/]/).pop().includes('.')) {
          return;
        }
        display.value += value;
      }
      currentExpression = display.value;
    }

    // Clear the display
    function clearDisplay() {
      display.value = '0';
      currentExpression = '';
    }

    // Clear the last character from the display
    function clearLast() {
      if (display.value.length > 1) {
        display.value = display.value.slice(0, -1);
        currentExpression = display.value;
      } else {
        display.value = '0';
        currentExpression = '';
      }
    }

    // Safe calculation function to replace eval
    function calculate(expression) {
      try {
        // Validate expression first
        if (!isValidExpression(expression)) {
          throw new Error('Invalid expression');
        }
        
        // Replace functions and constants with JavaScript equivalents
        expression = expression.replace(/sin\(/g, 'Math.sin(');
        expression = expression.replace(/cos\(/g, 'Math.cos(');
        expression = expression.replace(/tan\(/g, 'Math.tan(');
        expression = expression.replace(/log\(/g, 'Math.log10(');
        expression = expression.replace(/ln\(/g, 'Math.log(');
        expression = expression.replace(/Ï€/g, 'Math.PI');
        expression = expression.replace(/e/g, 'Math.E');
        expression = expression.replace(/\^/g, '**');
        expression = expression.replace(/âˆš\(/g, 'Math.sqrt(');
        expression = expression.replace(/%/g, '/100');
        
        // Use Function constructor instead of eval for better security
        return new Function('return ' + expression)();
      } catch (e) {
        throw new Error('Invalid expression');
      }
    }

    // Validate expression for security
    function isValidExpression(expr) {
      // Remove allowed functions and constants
      const cleanedExpr = expr.replace(/sin|cos|tan|log|ln|Ï€|e|âˆš|\d|\+|\-|\*|\/|\(|\)|\.|\^|%/g, '');
      
      // If anything remains, it's not valid
      return cleanedExpr.length === 0;
    }

    // Calculate the result
    function calculateResult() {
      try {
        if (!currentExpression) return;
        
        // Add animation to display
        display.classList.add('calculating');
        
        let result = calculate(currentExpression);
        lastResult = result;
        
        // Format number to avoid too long decimals
        if (typeof result === 'number') {
          result = roundResult(result);
        }
        
        // Add the calculation to history
        addToHistory(`${currentExpression} = ${result}`);
        
        display.value = result;
        currentExpression = result.toString();
        
        // Save history to localStorage
        saveHistory();
        
        // Remove animation after calculation
        setTimeout(() => {
          display.classList.remove('calculating');
        }, 300);
      } catch (e) {
        display.value = 'Error';
        setTimeout(() => {
          display.value = currentExpression || '0';
        }, 1500);
      }
    }

    // Round result to avoid floating point issues
    function roundResult(num) {
      // Round to 10 decimal places to avoid floating point precision issues
      return Math.round(num * 10000000000) / 10000000000;
    }

    // Scientific functions
    function calculateSin() {
      appendToDisplay('sin(');
    }

    function calculateCos() {
      appendToDisplay('cos(');
    }

    function calculateTan() {
      appendToDisplay('tan(');
    }

    function calculateLog() {
      appendToDisplay('log(');
    }

    function calculateLn() {
      appendToDisplay('ln(');
    }

    function calculateSquareRoot() {
      appendToDisplay('âˆš(');
    }

    function calculatePower() {
      if (display.value === '0') {
        display.value = '';
      }
      appendToDisplay('^');
    }

    function calculateFactorial() {
      try {
        let num = parseFloat(display.value);
        if (isNaN(num) || num < 0 || !Number.isInteger(num)) {
          throw new Error('Invalid input for factorial');
        }
        
        let result = 1;
        for (let i = 2; i <= num; i++) {
          result *= i;
        }
        
        addToHistory(`${num}! = ${result}`);
        display.value = result;
        currentExpression = result.toString();
        saveHistory();
      } catch (e) {
        display.value = 'Error';
        setTimeout(() => {
          display.value = currentExpression || '0';
        }, 1500);
      }
    }

    function calculatePi() {
      if (display.value === '0') {
        display.value = 'Ï€';
      } else {
        appendToDisplay('Ï€');
      }
    }

    function calculateE() {
      if (display.value === '0') {
        display.value = 'e';
      } else {
        appendToDisplay('e');
      }
    }

    // Add calculation to history
    function addToHistory(calculation) {
      let historyItem = document.createElement('li');
      historyItem.textContent = calculation;
      historyList.appendChild(historyItem);
      
      // Keep only the last 10 history items
      if (historyList.children.length > 10) {
        historyList.removeChild(historyList.firstChild);
      }
    }

    // Clear history
    function clearHistory() {
      historyList.innerHTML = '';
      localStorage.removeItem('calculatorHistory');
    }

    // Save history to localStorage
    function saveHistory() {
      const historyItems = [];
      for (let i = 0; i < historyList.children.length; i++) {
        historyItems.push(historyList.children[i].textContent);
      }
      localStorage.setItem('calculatorHistory', JSON.stringify(historyItems));
    }

    // Load history from localStorage
    function loadHistory() {
      const savedHistory = localStorage.getItem('calculatorHistory');
      if (savedHistory) {
        const historyItems = JSON.parse(savedHistory);
        historyItems.forEach(item => {
          addToHistory(item);
        });
      }
    }

    // Toggle between light and dark modes
    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      
      // Save theme preference to localStorage
      const isDarkMode = document.body.classList.contains('dark-mode');
      localStorage.setItem('darkMode', isDarkMode);
    }

    // Initialize theme from localStorage
    function initTheme() {
      const darkMode = localStorage.getItem('darkMode') === 'true';
      if (darkMode) {
        document.body.classList.add('dark-mode');
      }
    }

    // Initialize when page loads
    window.onload = initCalculator;
  </script>
</body>
</html>
